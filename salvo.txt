async create(req: Request, res: Response): Promise<Response> {
    try {
      const payload = req.body
      const result = await ProdutoService.create(payload);
        return res.status(201).json(result);        
    } catch (error) {
      return res.status(500).json({ error });
    }
  },

   async create(payload: IProduto): Promise<IProdutoResponse> {
    const ValidaCB = await ProdutoModel.findOne({
      bar_codes: payload.bar_codes,
    });
    if (ValidaCB) {
      throw console.error("Esse Código de barras já existe");
    } else {
      if (payload.qtd_stock < 1) {
        payload.stock_control_enebled = false;
      } else {
        payload.stock_control_enebled = true;
      }
      const result = await ProdutoRepository.create(payload);
      return result;
    }
  }

  async createCsv(req: Request, res: Response) {
    try {
      const readingFile = (await readFile("test.csv")).toString();
      const splitFile = readingFile.split("\r\n");
      // eslint-disable-next-line @typescript-eslint/no-unused-vars
      const [header, ...files] = splitFile;
      const arr = [];
      const arr2 = [];
      const data = new Date();
      for (const i of files) {
        const splitFiles = i.split(",");
        const ValidateQS = Number(splitFiles[5])
        if(ValidateQS < 1) {
          arr2.push({
            title: splitFiles[0],
            description: splitFiles[1],
            departament: splitFiles[2],
            brand: splitFiles[3],
            price: Number(splitFiles[4]),
            qtd_stock: Number(splitFiles[5]),
            bar_codes: splitFiles[6],
            stock_control_enebled: Boolean(false),
            created_at: data,
            updated_at: data
          })
          Product.collection.insertMany(arr2)
        } else {
          arr.push({
            title: splitFiles[0],
            description: splitFiles[1],
            departament: splitFiles[2],
            brand: splitFiles[3],
            price: Number(splitFiles[4]),
            qtd_stock: Number(splitFiles[5]),
            bar_codes: splitFiles[6],
            stock_control_enebled: Boolean(true),
            created_at: data,
            updated_at: data
          });
          Product.collection.insertMany(arr, function(err) {
            if(err) {
              return res.status(400).json("Something went wrong")
            }
          })
        }
      }
      
      
    } catch (error) {
      return res.status(400).json("Import went wrong");
    }
  },